
/*Vue.createApp({
    data() {
        return {
            lessons: [

            ], // Holds the lessons data fetched from the server
            cartLessons: [], // Lessons added to the cart
            selectedFilter: "option2", // Default filter selection
            sortDirection: "asc", // Sort direction: ascending or descending
            currentPage: "shop", // Tracks current page ('shop' or 'cart')
            showHeader: true, // Show or hide header
        };
    },
    computed: {
        // Filters and sorts lessons based on selected options
        filteredLessons() {
            let sortedLessons = [...this.lessons];

            // Apply sorting based on the selected filter
            if (this.selectedFilter === "option2") {
                sortedLessons.sort((a, b) =>
                    this.sortDirection === "asc"
                        ? a.Subject.localeCompare(b.Subject)
                        : b.Subject.localeCompare(a.Subject)
                );
            } else if (this.selectedFilter === "option3") {
                sortedLessons.sort((a, b) =>
                    this.sortDirection === "asc"
                        ? a.Location.localeCompare(b.Location)
                        : b.Location.localeCompare(a.Location)
                );
            } else if (this.selectedFilter === "option4") {
                sortedLessons.sort((a, b) =>
                    this.sortDirection === "asc"
                        ? a.Price - b.Price
                        : b.Price - a.Price
                );
            } else if (this.selectedFilter === "option5") {
                sortedLessons.sort((a, b) =>
                    this.sortDirection === "asc"
                        ? a.Available - b.Available
                        : b.Available - a.Available
                );
            }

            return sortedLessons;
        },
    },
    methods: {
        // Fetch lessons data from the API
        async fetchLessons() {
            try {
                const response = await fetch("http://localhost:3000/api/lessons");
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                this.lessons = await response.json();
            } catch (error) {
                console.error("Error fetching lessons:", error);
                alert("Failed to load lessons. Please try again later.");
            }
        },
        // Add a lesson to the cart
        addLessonToCart(lesson) {
            const existingItem = this.cartLessons.find((item) => item.id === lesson.id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                this.cartLessons.push({ ...lesson, quantity: 1 });
            }
            lesson.Available -= 1; // Reduce availability
        },
        // Remove a lesson from the cart
        removeFromCart(index) {
            const lesson = this.cartLessons[index];
            this.cartLessons.splice(index, 1);
            const originalLesson = this.lessons.find((item) => item.id === lesson.id);
            if (originalLesson) {
                originalLesson.Available += lesson.quantity; // Restore availability
            }
        },
        // Toggle between ascending and descending sort
        toggleSortDirection() {
            this.sortDirection = this.sortDirection === "asc" ? "desc" : "asc";
        },
        // Switch pages between 'shop' and 'cart'
        togglePage(page) {
            this.currentPage = page;
        },
    },
    created() {
        this.fetchLessons(); // Fetch lessons data when the component is created
    },
}).mount('#app');

*/